from scrapy.spider import Spider
from scrapy.selector import Selector
from scrapy.contrib.loader import XPathItemLoader
from scrapy.contrib.loader.processor import Join, MapCompose
from scrapy.http import FormRequest, Request
from scraper.items import faculty_contact


class faculty_spider(Spider):
    name = "faculty"
    allowed_domains = ["dir.aucegypt.edu"]
    start_urls = ["http://dir.aucegypt.edu/index.aspx"]
    deals_list_xpath = '//*[@id="ctl00_ContentPlaceHolder1_DataList1"]'
    item_fields = {'name': '//*[contains(@id, "NameLabel")]',
    'department': '//*[contains(@id, "DeptLabel")]',
    'title': '//*[contains(@id, "TitleLabel")]',
    'email': '//*[contains(@id, "mailA")]/img[@src]',
    'phone': '//*[contains(@id, "PhoneLabel")]',
    'building': '//*[contains(@id, "BLDGLabel")]',
    'room': '//*[contains(@id, "RMLabel")]',
    'campus': '//*[contains(@id, "CampusLabel")]'}

    def parse(self, response):
        print "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
        yield FormRequest.from_response(response, formname='aspnetForm',
                            formdata={'__LASTFOCUS':'', '__VIEWSTATE': '/wEPDwUJLTkyMjM0OTc5D2QWAmYPZBYCAgMPZBYCAgMPZBYGAgMPD2QWAh4Jb25rZXlkb3duBb0BaWYoZXZlbnQud2hpY2ggfHwgZXZlbnQua2V5Q29kZSl7aWYgKChldmVudC53aGljaCA9PSAxMykgfHwgKGV2ZW50LmtleUNvZGUgPT0gMTMpKSB7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N0bDAwJENvbnRlbnRQbGFjZUhvbGRlcjEkQnV0dG9uMScpLmNsaWNrKCk7cmV0dXJuIGZhbHNlO319IGVsc2Uge3JldHVybiB0cnVlfTsgZAIJDw9kFgIfAAW9AWlmKGV2ZW50LndoaWNoIHx8IGV2ZW50LmtleUNvZGUpe2lmICgoZXZlbnQud2hpY2ggPT0gMTMpIHx8IChldmVudC5rZXlDb2RlID09IDEzKSkge2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdGwwMCRDb250ZW50UGxhY2VIb2xkZXIxJEJ1dHRvbjEnKS5jbGljaygpO3JldHVybiBmYWxzZTt9fSBlbHNlIHtyZXR1cm4gdHJ1ZX07IGQCEw8QDxYCHgtfIURhdGFCb3VuZGcWAh8ABb0BaWYoZXZlbnQud2hpY2ggfHwgZXZlbnQua2V5Q29kZSl7aWYgKChldmVudC53aGljaCA9PSAxMykgfHwgKGV2ZW50LmtleUNvZGUgPT0gMTMpKSB7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N0bDAwJENvbnRlbnRQbGFjZUhvbGRlcjEkQnV0dG9uMScpLmNsaWNrKCk7cmV0dXJuIGZhbHNlO319IGVsc2Uge3JldHVybiB0cnVlfTsgEBWeAQAYQWNhZGVtaWMgQWR2aXNpbmcgQ2VudGVyM0FjYWRlbWljIEFzc2Vzc21lbnQgYW5kIEFjY3JlZGl0YXRpb24sIE9mZmljZSAoQUFBKRVBY2NvdW50aW5nIERlcGFydG1lbnQSQWRtaXNzaW9ucywgT2ZmaWNlIkFsdW1uaSBhbmQgVHJ1c3RlZSBBZmZhaXJzLCBPZmZpY2UTQXBwbGllZCBMaW5ndWlzdGljcypBcmFiIGFuZCBJc2xhbWljIENpdmlsaXphdGlvbnMsIERlcGFydG1lbnQnQXJhYmljIExhbmd1YWdlIEluc3RydWN0aW9uLCBEZXBhcnRtZW50EEFydHMsIERlcGFydG1lbnQVQXRobGV0aWNzLCBEZXBhcnRtZW50CUFVQyBGb3J1bRhBVUMgUHJlc3MgYW5kIEJvb2tzdG9yZXMdQVVDIFByZXNzIERpc3RyaWJ1dGlvbiBDZW50ZXIfQVZQIGZvciBGYWNpbGl0aWVzICYgT3BlcmF0aW9ucxNCaW9sb2d5LCBEZXBhcnRtZW50JUJ1ZGdldCBhbmQgRmluYW5jaWFsIFBsYW5uaW5nLCBPZmZpY2UTQnVpbGRpbmdzICYgR3JvdW5kcxhCdXNpbmVzcyBDb21wdXRlciBDZW50ZXIXQnVzaW5lc3MgU3VwcG9ydCBPZmZpY2UeQ2Fpcm8gUGFwZXJzIGluIFNvY2lhbCBTY2llbmNlJ0NhbXB1cyBQbGFubmluZyAmIENvbnN0cnVjdGlvbiBTZXJ2aWNlcw1DYXJlZXIgQ2VudGVyIENlbnRlciBmb3IgTGVhcm5pbmcgYW5kIFRlYWNoaW5nKENlbnRlciBmb3IgTWlncmF0aW9uIGFuZCBSZWZ1Z2VlIFN0dWRpZXMiQ2VudGVyIGZvciBTdXN0YWluYWJsZSBEZXZlbG9wbWVudB9DZW50ZXIgZm9yIFRyYW5zYWx0aW9uIFN0dWRpZXMgKUNlbnRlciBvZiBOYW5vZWxlY3Ryb25pY3MgJiBEZXZpY2VzIChDTkQpFUNoZW1pc3RyeSwgRGVwYXJ0bWVudCpDaXRhZGVsIENhcGl0YWwgRmluYW5jaWFsIFNlcnZpY2VzICBDZW50ZXIpQ2xhc3Nyb29tIFRlY2hub2xvZ2llcyBhbmQgTWVkaWEgU2VydmljZXMWQ29tbXVuaWNhdGlvbnMsIE9mZmljZSxDb21wdXRlciBTY2llbmNlIGFuZCBFbmdpbmVlcmluZywgRGVwYXJ0bWVudCpDb25zdHJ1Y3Rpb24gYW5kIEFyY2hpdGVjdHVyYWwgRW5naW5lZXJpbmcSQ29udHJvbGxlciwgT2ZmaWNlF0NvcmUgQ3VycmljdWx1bSwgT2ZmaWNlEUNvdW5zZWxvciwgT2ZmaWNlN0N5bnRoaWEgTmVsc29uIEluc3RpdHV0ZSBmb3IgR2VuZGVyIGFuZCBXb21lbidzIFN0dWRpZXMxRGF0YSBBbmFseXRpY3MgYW5kIEluc3RpdHV0aW9uYWwgUmVzZWFyY2gsIE9mZmljZShEZWFuIG9mIEdsb2JhbCBBZmZhaXJzIGFuZCBQdWJsaWMgUG9saWN5H0RlYW4gb2YgR3JhZHVhdGUgU3R1ZGllcyxPZmZpY2UmRGVhbiBvZiBIdW1hbml0aWVzIGFuZCBTb2NpYWwgU2NpZW5jZXMrRGVhbiBvZiBMaWJyYXJpZXMgYW5kIExlYXJuaW5nIFRlY2hub2xvZ2llcyBEZWFuIG9mIFNjaWVuY2VzIGFuZCBFbmdpbmVlcmluZx5EZWFuIG9mIHRoZSBTY2hvb2wgb2YgQnVzaW5lc3MqRGVhbiBvZiB0aGUgU2Nob29sIG9mIENvbnRpbnVpbmcgRWR1Y2F0aW9uJURlYW4gb2YgVW5kZXJncmFkdWF0ZSBTdHVkaWVzLCBPZmZpY2UTRGV2ZWxvcG1lbnQsIE9mZmljZS5FY29ub21pYyBhbmQgQnVzaW5lc3MgSGlzdG9yeSBSZXNlYXJjaCBDZW50ZXIgFUVjb25vbWljcywgRGVwYXJ0bWVudCNFbGVjdHJvbmljcyBFbmdpbmVlcmluZywgRGVwYXJ0bWVudC5FbC1LaGF6aW5kYXIgQnVzaW5lc3MgUmVzZWFyY2ggYW5kIENhc2UgQ2VudGVyLUVtcGxveWFiaWxpdHkgYW5kIENhcmVlciBEZXZlbG9wbWVudCBDZW50ZXJzICpFbmdpbmVlcmluZyAmIFNjaWVuY2UgU2VydmljZXMsIERlcGFydG1lbnQuRW5nbGlzaCBhbmQgQ29tcGFyYXRpdmUgTGl0ZXJhdHVyZSwgRGVwYXJ0bWVudClFbmdsaXNoIExhbmd1YWdlIEluc3RydWN0aW9uLCBEZXBhcnRtZW50ICdFbnZpcm9ubWVudGFsIEhlYWx0aCBhbmQgU2FmZXR5LCBPZmZpY2UjRW52aXJvbm1lbnRhbCBTZXJ2aWNlcywgRGVwYXJ0bWVudCAwRXF1YWwgT3Bwb3J0dW5pdHkgYW5kIEFmZmlybWF0aXZlIEFjdGlvbiwgT2ZmaWNlDkV2ZW50cywgT2ZmaWNlP0V4ZWN1dGl2ZSBWaWNlIFByZXNpZGVudCBmb3IgQWRtaW5pc3RyYXRpb24gYW5kIEZpbmFuY2UsIE9mZmljZRdFeHRlcm5hbCBMaWFzaW9uIE9mZmljZSBGYWNpbGl0aWVzICYgT3BlcmF0aW9ucyBEb3dudG93bhlGYWNpbGl0aWVzIGFuZCBPcGVyYXRpb25zLkZhY2lsaXRpZXMgYW5kIE9wZXJhdGlvbnMvIE1haW50ZW5hbmNlLCBPZmZpY2UfRmFjaWxpdGllcyBhbmQgU2VydmljZXMsIE9mZmljZSRGYWNpbGl0aWVzIGFuZCBTZXJ2aWNlcy8gTWFpbCBPZmZpY2UuRmFjaWxpdGllcyBhbmQgU2VydmljZXMvIE1haW50ZW5hbmNlIGFuZCBBZG1pbiFGYWNpbGl0aWVzIGFuZCBTZXJ2aWNlcy8gU2VydmljZXMWRmFjdWx0eSBIb3VzaW5nIE9mZmljZRBGYWN1bHR5IFNlcnZpY2VzGkZvb2QgU2VydmljZXMgLCBVbml2ZXJzaXR5EkdBUFAgQ29tcHV0ZXIgTGFicx1HcmFkdWF0ZSBTY2hvb2wgb2YgRWR1Y2F0aW9uIBlHcmFkdWF0ZSBTdHVkZW50IFNlcnZpY2VzE0hpc3RvcnksIERlcGFydG1lbnQXSHVtYW4gUmVzb3VyY2VzLCBPZmZpY2UeSW5mb3JtYXRpb24gVGVjaG5vbG9neSwgT2ZmaWNlHkluc3RpdHV0ZSBvZiBCYW5raW5nICYgRmluYW5jZSNJbnN0aXR1dGUgb2YgTWFuYWdlbWVudCBEZXZlbG9wbWVudC5JbnN0aXR1dGlvbmFsIERldmVsb3BtZW50IC8gU2Nob29sIE9mIEJ1c2luZXNzGUludGVybmFsIEF1ZGl0b3JzLCBPZmZpY2UrSW50ZXJuYXRpb25hbCBFeGVjdXRpdmUgRWR1Y2F0aW9uIEluc3RpdHV0ZR5JbnRlcm5hdGlvbmFsIFByb2dyYW1zLCBPZmZpY2UkSW50ZXJuYXRpb25hbCBTdHVkZW50IEFmZmFpcnMgT2ZmaWNlHEludGVybmF0aW9uYWxpemF0aW9uLCBPZmZpY2U8Sm9obiBELiBHZXJoYXJ0IENlbnRlciBmb3IgUGhpbGFudGhyb3B5IGFuZCBDaXZpYyBFbmdhZ2VtZW50LUpvdXJuYWxpc20gYW5kIE1hc3MgQ29tbXVuaWNhdGlvbiwgRGVwYXJ0bWVudDhLYW1hbCBBZGhhbSBDZW50ZXIgZm9yIFRlbGV2aXNpb24gYW5kIERpZ2l0YWwgSm91cm5hbGlzbQ9MYXcsIERlcGFydG1lbnQVTGVnYWwgQWZmYWlycywgT2ZmaWNlDE1haW4gTGlicmFyeRdNYWludGVuYW5jZS9EVCwgT2ZmaWNlIBFNYW5hZ2VtZW50IENlbnRlchZNYW5hZ2VtZW50LCBEZXBhcnRtZW50K01hdGhlbWF0aWNzICYgQWN0dWFyaWFsIFNjaWVuY2UsIERlcGFydG1lbnQiTWVjaGFuaWNhbCBFbmdpbmVlcmluZywgRGVwYXJ0bWVudBhNZWRpY2FsIFNlcnZpY2VzLCBPZmZpY2UaTWlkZGxlIEVhc3QgU3R1ZGllcyBDZW50ZXIPTmV3IFlvcmsgT2ZmaWNlDk9tYnVkcywgT2ZmaWNlLFBldHJvbGV1bSBhbmQgRW5lcmd5IEVuZ2luZWVyaW5nLCBEZXBhcnRtZW50FlBoaWxvc29waHksIERlcGFydG1lbnQTUGh5c2ljcywgRGVwYXJ0bWVudB1Qb2xpdGljYWwgU2NpZW5jZSwgRGVwYXJ0bWVudBFQcmVzaWRlbnQsIE9mZmljZQlQcmludHNob3AwUHJvcGVydHkgSW52ZW50b3J5ICYgV2FyZWhvdXNlcyBDb250cm9sLCBPZmZpY2UgD1Byb3Zvc3QsIE9mZmljZS1QdWJsaWMgUG9saWN5IGFuZCBBZG1pbmlzdHJhdGlvbiwgRGVwYXJ0bWVudCASUXVhbGl0eSBBc3N1cmFuY2UgKlJhcmUgQm9va3MgYW5kIFNwZWNpYWwgQ29sbGVjdGlvbnMgTGlicmFyeSZSZWNydWl0bWVudCBhbmQgU3R1ZGVudCBTZXJ2aWNlIENlbnRlchFSZWdpc3RyYXIsIE9mZmljZTdSZXNlYXJjaCBJbnN0aXR1dGUgZm9yIGEgU3VzdGFpbmFibGUgRW52aXJvbm1lbnQgKFJJU0UpGFJlc2lkZW50aWFsIExpZmUsIE9mZmljZSRSaGV0b3JpYyBhbmQgQ29tcG9zaXRpb24sIERlcGFydG1lbnQjU0NFLCBDYXJlZXIgRGV2ZWxvcG1lbnQgRGVwYXJ0bWVudCAuU0NFLCBFZHVjYXRpb25hbCBUZXN0aW5nJiBBc3Nlc3NtZW50IERpdmlzaW9uIBlTQ0UsIEVucm9sbG1lbnQgU2VydmljZXMgDFNDRSwgRmluYW5jZRpTQ0UsIEluc3RydWN0aW9uYWwgQWZmYWlycxlTQ0UsIExhbmd1YWdlcyBEZXBhcnRtZW50J1NDRSwgTWFya2V0aW5nIGFuZCBCdXNpbmVzcyBEZXZlbG9wbWVudCdTQ0UsIFByb2dyYW1zICYgUGFydG5lcnNoaXBzIERlcGFydG1lbnQSU2Nob29sIG9mIEJ1c2luZXNzIlNjaG9vbCBvZiBTY2llbmNlcyBhbmQgRW5naW5lZXJpbmcmU2NpZW5jZSBhbmQgVGVjaG5vbG9neSBSZXNlYXJjaCBDZW50ZXIQU2VjdXJpdHksIE9mZmljZQ5TZW5hdGUsIE9mZmljZRZTb2NpYWwgUmVzZWFyY2ggQ2VudGVyPlNvY2lvbG9neSwgQW50aHJvcG9sb2d5LCBQc3ljaG9sb2d5IGFuZCBFZ3lwdG9sb2d5LCBEZXBhcnRtZW50IFNwZWNpYWwgQWR2aXNvciB0byB0aGUgUHJlc2lkZW50GlNwb25zb3JlZCBQcm9ncmFtcywgT2ZmaWNlNVNTRSwgQXNzb2NpYXRlIERlYW4gZm9yIEdyYWR1YXRlIFN0dWRpZXMgYW5kIFJlc2VhcmNoLVNTRSwgQXNzb2NpYXRlIERlYW4gZm9yIFVuZGVyZ3JhZHVhdGUgc3R1ZGllczBTdHJhdGVnaWMgYW5kIEludGVybmF0aW9uYWwgSW5pdGlhdGl2ZXMsIE9mZmljZSAbU3R1ZGVudCBEZXZlbG9wbWVudCwgT2ZmaWNlMlN0dWRlbnQgRmluYW5jaWFsIEFmZmFpcnMgYW5kIFNjaG9sYXJzaGlwcywgT2ZmaWNlFFN0dWRlbnQgTGlmZSwgb2ZmaWNlLVN0dWRlbnQgU2VydmljZXMgLSBTY2hvb2wgb2YgQnVzaW5lc3MsIE9mZmljZRdTdHVkZW50IFNlcnZpY2VzIE9ubGluZRdTdHVkZW50IFN1cHBvcnQsIE9mZmljZTRTdXBwbHkgQ2hhaW4gTWFuYWdlbWVudCBhbmQgQnVzaW5lc3MgU3VwcG9ydCwgT2ZmaWNlFlN1c3RhaW5hYmlsaXR5LCBPZmZpY2UgVGVjaG5vbG9neSBUcmFuc2ZlciBPZmZpY2UgKFRUTykzVGhlIFByaW5jZSBBbHdhbGVlZCBmb3IgQW1lcmljYW4gU3R1ZGllcyAmIFJlc2VhcmNoFlRoZWJhbiBNYXBwaW5nIFByb2plY3QgVHJhaW5pbmcgYW5kIERldmVsb3BtZW50LCBPZmZpY2UXVHJhbnNwb3J0YXRpb24gU2VydmljZXMNVHJhdmVsIE9mZmljZSpVbml2ZXJzaXR5IEFjYWRlbWljIENvbXB1dGluZyBUZWNobm9sb2dpZXMeVW5pdmVyc2l0eSBJbmZvcm1hdGlvbiBTeXN0ZW1zJFVuaXZlcnNpdHkgVGVjaG5vbG9neSBJbmZyYXN0cnVjdHVyZTRWaWNlIFByZXNpZGVudCBmb3IgSW5zdGl0dXRpb25hbCBBZHZhbmNlbWVudCwgT2ZmaWNlKlZpY2UgUHJlc2lkZW50IGZvciBTdHVkZW50IEFmZmFpcnMsIE9mZmljZTRZb3VzZWYgSmFtZWVsIFNjaWVuY2UgYW5kIFRlY2hub2xvZ3kgUmVzZWFyY2ggQ2VudGVyEVphbWFsZWsgRG9ybWl0b3J5FZ4BABhBY2FkZW1pYyBBZHZpc2luZyBDZW50ZXIzQWNhZGVtaWMgQXNzZXNzbWVudCBhbmQgQWNjcmVkaXRhdGlvbiwgT2ZmaWNlIChBQUEpFUFjY291bnRpbmcgRGVwYXJ0bWVudBJBZG1pc3Npb25zLCBPZmZpY2UiQWx1bW5pIGFuZCBUcnVzdGVlIEFmZmFpcnMsIE9mZmljZRNBcHBsaWVkIExpbmd1aXN0aWNzKkFyYWIgYW5kIElzbGFtaWMgQ2l2aWxpemF0aW9ucywgRGVwYXJ0bWVudCdBcmFiaWMgTGFuZ3VhZ2UgSW5zdHJ1Y3Rpb24sIERlcGFydG1lbnQQQXJ0cywgRGVwYXJ0bWVudBVBdGhsZXRpY3MsIERlcGFydG1lbnQJQVVDIEZvcnVtGEFVQyBQcmVzcyBhbmQgQm9va3N0b3Jlcx1BVUMgUHJlc3MgRGlzdHJpYnV0aW9uIENlbnRlch9BVlAgZm9yIEZhY2lsaXRpZXMgJiBPcGVyYXRpb25zE0Jpb2xvZ3ksIERlcGFydG1lbnQlQnVkZ2V0IGFuZCBGaW5hbmNpYWwgUGxhbm5pbmcsIE9mZmljZRNCdWlsZGluZ3MgJiBHcm91bmRzGEJ1c2luZXNzIENvbXB1dGVyIENlbnRlchdCdXNpbmVzcyBTdXBwb3J0IE9mZmljZR5DYWlybyBQYXBlcnMgaW4gU29jaWFsIFNjaWVuY2UnQ2FtcHVzIFBsYW5uaW5nICYgQ29uc3RydWN0aW9uIFNlcnZpY2VzDUNhcmVlciBDZW50ZXIgQ2VudGVyIGZvciBMZWFybmluZyBhbmQgVGVhY2hpbmcoQ2VudGVyIGZvciBNaWdyYXRpb24gYW5kIFJlZnVnZWUgU3R1ZGllcyJDZW50ZXIgZm9yIFN1c3RhaW5hYmxlIERldmVsb3BtZW50H0NlbnRlciBmb3IgVHJhbnNhbHRpb24gU3R1ZGllcyApQ2VudGVyIG9mIE5hbm9lbGVjdHJvbmljcyAmIERldmljZXMgKENORCkVQ2hlbWlzdHJ5LCBEZXBhcnRtZW50KkNpdGFkZWwgQ2FwaXRhbCBGaW5hbmNpYWwgU2VydmljZXMgIENlbnRlcilDbGFzc3Jvb20gVGVjaG5vbG9naWVzIGFuZCBNZWRpYSBTZXJ2aWNlcxZDb21tdW5pY2F0aW9ucywgT2ZmaWNlLENvbXB1dGVyIFNjaWVuY2UgYW5kIEVuZ2luZWVyaW5nLCBEZXBhcnRtZW50KkNvbnN0cnVjdGlvbiBhbmQgQXJjaGl0ZWN0dXJhbCBFbmdpbmVlcmluZxJDb250cm9sbGVyLCBPZmZpY2UXQ29yZSBDdXJyaWN1bHVtLCBPZmZpY2URQ291bnNlbG9yLCBPZmZpY2U3Q3ludGhpYSBOZWxzb24gSW5zdGl0dXRlIGZvciBHZW5kZXIgYW5kIFdvbWVuJ3MgU3R1ZGllczFEYXRhIEFuYWx5dGljcyBhbmQgSW5zdGl0dXRpb25hbCBSZXNlYXJjaCwgT2ZmaWNlKERlYW4gb2YgR2xvYmFsIEFmZmFpcnMgYW5kIFB1YmxpYyBQb2xpY3kfRGVhbiBvZiBHcmFkdWF0ZSBTdHVkaWVzLE9mZmljZSZEZWFuIG9mIEh1bWFuaXRpZXMgYW5kIFNvY2lhbCBTY2llbmNlcytEZWFuIG9mIExpYnJhcmllcyBhbmQgTGVhcm5pbmcgVGVjaG5vbG9naWVzIERlYW4gb2YgU2NpZW5jZXMgYW5kIEVuZ2luZWVyaW5nHkRlYW4gb2YgdGhlIFNjaG9vbCBvZiBCdXNpbmVzcypEZWFuIG9mIHRoZSBTY2hvb2wgb2YgQ29udGludWluZyBFZHVjYXRpb24lRGVhbiBvZiBVbmRlcmdyYWR1YXRlIFN0dWRpZXMsIE9mZmljZRNEZXZlbG9wbWVudCwgT2ZmaWNlLkVjb25vbWljIGFuZCBCdXNpbmVzcyBIaXN0b3J5IFJlc2VhcmNoIENlbnRlciAVRWNvbm9taWNzLCBEZXBhcnRtZW50I0VsZWN0cm9uaWNzIEVuZ2luZWVyaW5nLCBEZXBhcnRtZW50LkVsLUtoYXppbmRhciBCdXNpbmVzcyBSZXNlYXJjaCBhbmQgQ2FzZSBDZW50ZXItRW1wbG95YWJpbGl0eSBhbmQgQ2FyZWVyIERldmVsb3BtZW50IENlbnRlcnMgKkVuZ2luZWVyaW5nICYgU2NpZW5jZSBTZXJ2aWNlcywgRGVwYXJ0bWVudC5FbmdsaXNoIGFuZCBDb21wYXJhdGl2ZSBMaXRlcmF0dXJlLCBEZXBhcnRtZW50KUVuZ2xpc2ggTGFuZ3VhZ2UgSW5zdHJ1Y3Rpb24sIERlcGFydG1lbnQgJ0Vudmlyb25tZW50YWwgSGVhbHRoIGFuZCBTYWZldHksIE9mZmljZSNFbnZpcm9ubWVudGFsIFNlcnZpY2VzLCBEZXBhcnRtZW50IDBFcXVhbCBPcHBvcnR1bml0eSBhbmQgQWZmaXJtYXRpdmUgQWN0aW9uLCBPZmZpY2UORXZlbnRzLCBPZmZpY2U/RXhlY3V0aXZlIFZpY2UgUHJlc2lkZW50IGZvciBBZG1pbmlzdHJhdGlvbiBhbmQgRmluYW5jZSwgT2ZmaWNlF0V4dGVybmFsIExpYXNpb24gT2ZmaWNlIEZhY2lsaXRpZXMgJiBPcGVyYXRpb25zIERvd250b3duGUZhY2lsaXRpZXMgYW5kIE9wZXJhdGlvbnMuRmFjaWxpdGllcyBhbmQgT3BlcmF0aW9ucy8gTWFpbnRlbmFuY2UsIE9mZmljZR9GYWNpbGl0aWVzIGFuZCBTZXJ2aWNlcywgT2ZmaWNlJEZhY2lsaXRpZXMgYW5kIFNlcnZpY2VzLyBNYWlsIE9mZmljZS5GYWNpbGl0aWVzIGFuZCBTZXJ2aWNlcy8gTWFpbnRlbmFuY2UgYW5kIEFkbWluIUZhY2lsaXRpZXMgYW5kIFNlcnZpY2VzLyBTZXJ2aWNlcxZGYWN1bHR5IEhvdXNpbmcgT2ZmaWNlEEZhY3VsdHkgU2VydmljZXMaRm9vZCBTZXJ2aWNlcyAsIFVuaXZlcnNpdHkSR0FQUCBDb21wdXRlciBMYWJzHUdyYWR1YXRlIFNjaG9vbCBvZiBFZHVjYXRpb24gGUdyYWR1YXRlIFN0dWRlbnQgU2VydmljZXMTSGlzdG9yeSwgRGVwYXJ0bWVudBdIdW1hbiBSZXNvdXJjZXMsIE9mZmljZR5JbmZvcm1hdGlvbiBUZWNobm9sb2d5LCBPZmZpY2UeSW5zdGl0dXRlIG9mIEJhbmtpbmcgJiBGaW5hbmNlI0luc3RpdHV0ZSBvZiBNYW5hZ2VtZW50IERldmVsb3BtZW50Lkluc3RpdHV0aW9uYWwgRGV2ZWxvcG1lbnQgLyBTY2hvb2wgT2YgQnVzaW5lc3MZSW50ZXJuYWwgQXVkaXRvcnMsIE9mZmljZStJbnRlcm5hdGlvbmFsIEV4ZWN1dGl2ZSBFZHVjYXRpb24gSW5zdGl0dXRlHkludGVybmF0aW9uYWwgUHJvZ3JhbXMsIE9mZmljZSRJbnRlcm5hdGlvbmFsIFN0dWRlbnQgQWZmYWlycyBPZmZpY2UcSW50ZXJuYXRpb25hbGl6YXRpb24sIE9mZmljZTxKb2huIEQuIEdlcmhhcnQgQ2VudGVyIGZvciBQaGlsYW50aHJvcHkgYW5kIENpdmljIEVuZ2FnZW1lbnQtSm91cm5hbGlzbSBhbmQgTWFzcyBDb21tdW5pY2F0aW9uLCBEZXBhcnRtZW50OEthbWFsIEFkaGFtIENlbnRlciBmb3IgVGVsZXZpc2lvbiBhbmQgRGlnaXRhbCBKb3VybmFsaXNtD0xhdywgRGVwYXJ0bWVudBVMZWdhbCBBZmZhaXJzLCBPZmZpY2UMTWFpbiBMaWJyYXJ5F01haW50ZW5hbmNlL0RULCBPZmZpY2UgEU1hbmFnZW1lbnQgQ2VudGVyFk1hbmFnZW1lbnQsIERlcGFydG1lbnQrTWF0aGVtYXRpY3MgJiBBY3R1YXJpYWwgU2NpZW5jZSwgRGVwYXJ0bWVudCJNZWNoYW5pY2FsIEVuZ2luZWVyaW5nLCBEZXBhcnRtZW50GE1lZGljYWwgU2VydmljZXMsIE9mZmljZRpNaWRkbGUgRWFzdCBTdHVkaWVzIENlbnRlcg9OZXcgWW9yayBPZmZpY2UOT21idWRzLCBPZmZpY2UsUGV0cm9sZXVtIGFuZCBFbmVyZ3kgRW5naW5lZXJpbmcsIERlcGFydG1lbnQWUGhpbG9zb3BoeSwgRGVwYXJ0bWVudBNQaHlzaWNzLCBEZXBhcnRtZW50HVBvbGl0aWNhbCBTY2llbmNlLCBEZXBhcnRtZW50EVByZXNpZGVudCwgT2ZmaWNlCVByaW50c2hvcDBQcm9wZXJ0eSBJbnZlbnRvcnkgJiBXYXJlaG91c2VzIENvbnRyb2wsIE9mZmljZSAPUHJvdm9zdCwgT2ZmaWNlLVB1YmxpYyBQb2xpY3kgYW5kIEFkbWluaXN0cmF0aW9uLCBEZXBhcnRtZW50IBJRdWFsaXR5IEFzc3VyYW5jZSAqUmFyZSBCb29rcyBhbmQgU3BlY2lhbCBDb2xsZWN0aW9ucyBMaWJyYXJ5JlJlY3J1aXRtZW50IGFuZCBTdHVkZW50IFNlcnZpY2UgQ2VudGVyEVJlZ2lzdHJhciwgT2ZmaWNlN1Jlc2VhcmNoIEluc3RpdHV0ZSBmb3IgYSBTdXN0YWluYWJsZSBFbnZpcm9ubWVudCAoUklTRSkYUmVzaWRlbnRpYWwgTGlmZSwgT2ZmaWNlJFJoZXRvcmljIGFuZCBDb21wb3NpdGlvbiwgRGVwYXJ0bWVudCNTQ0UsIENhcmVlciBEZXZlbG9wbWVudCBEZXBhcnRtZW50IC5TQ0UsIEVkdWNhdGlvbmFsIFRlc3RpbmcmIEFzc2Vzc21lbnQgRGl2aXNpb24gGVNDRSwgRW5yb2xsbWVudCBTZXJ2aWNlcyAMU0NFLCBGaW5hbmNlGlNDRSwgSW5zdHJ1Y3Rpb25hbCBBZmZhaXJzGVNDRSwgTGFuZ3VhZ2VzIERlcGFydG1lbnQnU0NFLCBNYXJrZXRpbmcgYW5kIEJ1c2luZXNzIERldmVsb3BtZW50J1NDRSwgUHJvZ3JhbXMgJiBQYXJ0bmVyc2hpcHMgRGVwYXJ0bWVudBJTY2hvb2wgb2YgQnVzaW5lc3MiU2Nob29sIG9mIFNjaWVuY2VzIGFuZCBFbmdpbmVlcmluZyZTY2llbmNlIGFuZCBUZWNobm9sb2d5IFJlc2VhcmNoIENlbnRlchBTZWN1cml0eSwgT2ZmaWNlDlNlbmF0ZSwgT2ZmaWNlFlNvY2lhbCBSZXNlYXJjaCBDZW50ZXI+U29jaW9sb2d5LCBBbnRocm9wb2xvZ3ksIFBzeWNob2xvZ3kgYW5kIEVneXB0b2xvZ3ksIERlcGFydG1lbnQgU3BlY2lhbCBBZHZpc29yIHRvIHRoZSBQcmVzaWRlbnQaU3BvbnNvcmVkIFByb2dyYW1zLCBPZmZpY2U1U1NFLCBBc3NvY2lhdGUgRGVhbiBmb3IgR3JhZHVhdGUgU3R1ZGllcyBhbmQgUmVzZWFyY2gtU1NFLCBBc3NvY2lhdGUgRGVhbiBmb3IgVW5kZXJncmFkdWF0ZSBzdHVkaWVzMFN0cmF0ZWdpYyBhbmQgSW50ZXJuYXRpb25hbCBJbml0aWF0aXZlcywgT2ZmaWNlIBtTdHVkZW50IERldmVsb3BtZW50LCBPZmZpY2UyU3R1ZGVudCBGaW5hbmNpYWwgQWZmYWlycyBhbmQgU2Nob2xhcnNoaXBzLCBPZmZpY2UUU3R1ZGVudCBMaWZlLCBvZmZpY2UtU3R1ZGVudCBTZXJ2aWNlcyAtIFNjaG9vbCBvZiBCdXNpbmVzcywgT2ZmaWNlF1N0dWRlbnQgU2VydmljZXMgT25saW5lF1N0dWRlbnQgU3VwcG9ydCwgT2ZmaWNlNFN1cHBseSBDaGFpbiBNYW5hZ2VtZW50IGFuZCBCdXNpbmVzcyBTdXBwb3J0LCBPZmZpY2UWU3VzdGFpbmFiaWxpdHksIE9mZmljZSBUZWNobm9sb2d5IFRyYW5zZmVyIE9mZmljZSAoVFRPKTNUaGUgUHJpbmNlIEFsd2FsZWVkIGZvciBBbWVyaWNhbiBTdHVkaWVzICYgUmVzZWFyY2gWVGhlYmFuIE1hcHBpbmcgUHJvamVjdCBUcmFpbmluZyBhbmQgRGV2ZWxvcG1lbnQsIE9mZmljZRdUcmFuc3BvcnRhdGlvbiBTZXJ2aWNlcw1UcmF2ZWwgT2ZmaWNlKlVuaXZlcnNpdHkgQWNhZGVtaWMgQ29tcHV0aW5nIFRlY2hub2xvZ2llcx5Vbml2ZXJzaXR5IEluZm9ybWF0aW9uIFN5c3RlbXMkVW5pdmVyc2l0eSBUZWNobm9sb2d5IEluZnJhc3RydWN0dXJlNFZpY2UgUHJlc2lkZW50IGZvciBJbnN0aXR1dGlvbmFsIEFkdmFuY2VtZW50LCBPZmZpY2UqVmljZSBQcmVzaWRlbnQgZm9yIFN0dWRlbnQgQWZmYWlycywgT2ZmaWNlNFlvdXNlZiBKYW1lZWwgU2NpZW5jZSBhbmQgVGVjaG5vbG9neSBSZXNlYXJjaCBDZW50ZXIRWmFtYWxlayBEb3JtaXRvcnkUKwOeAWdnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZGQYAQUeX19Db250cm9sc1JlcXVpcmVQb3N0QmFja0tleV9fFgYFJ2N0bDAwJENvbnRlbnRQbGFjZUhvbGRlcjEkZmlyc3Rjb250YWlucwUkY3RsMDAkQ29udGVudFBsYWNlSG9sZGVyMSRmaXJzdGV4YWN0BSRjdGwwMCRDb250ZW50UGxhY2VIb2xkZXIxJGZpcnN0ZXhhY3QFJmN0bDAwJENvbnRlbnRQbGFjZUhvbGRlcjEkbGFzdGNvbnRhaW5zBSNjdGwwMCRDb250ZW50UGxhY2VIb2xkZXIxJGxhc3RleGFjdAUjY3RsMDAkQ29udGVudFBsYWNlSG9sZGVyMSRsYXN0ZXhhY3QmYY35IQ+1+SPjIkP85xd+IaSU1msm9liPd8N4F81sOw==',
                            '__EVENTTARGET': '', 'EVENTARGUMENT': '', '__EVENTVALIDATION': '/wEWqAEC++7x0g4C4aONwg8Cj+eYrAIC9KeviQwChMam+A0CldHWPQKz/67tAQLKmqHvAwKX+K6hAgL0j/KYDQLfspn/CQLf/trmDwKBlLyqCgLLqd3TBQL91aTSAgKO6ZzZBQLZxISMAgLdr7amBAKkk+KZBwLS857DBQL5r6DZDgKfpamLAQKAwLnKBQKBhqrnDQKwr8IFAvL2mrkDApHU1/AIAvGs6/YIAp6B2s8EApPJi9oDAqferaIFAoinhfsOAqO8mOYCAue4j/sPAuql6uQCAsrXgq8IAorK/JQEAv+txZcJAvWDt8UBArKfgkMCj/LMvA0CwtOHzAUC+9P0rwcCtqC52wUC3IjrDwLDxZXzCgLyhabGDALN27GcBgLgi5QnAsqKq2gC5b2Zsw8CipPbyQoCpcPOsgwCx6v+twsC3buNugoCn9/b1gsC3/3/yQsChc6DuAwC3daf4wEC0u6YkgsCh6iVuwkCtr74hw4C9PKr1gUCmoW0wgECndLB7QMCltj4mgMC0JLvmwICqKb0zQYCvpSX8A4Coe3yxgECivqZjgkCnNuTmAoCtM61IQLlooh2AsaGqtIBAr7f/KEFAq7QhhsClI/JtAoClomcqAUCpf79/AYC4fTsvAwCn4iByAoCp+Xr6gIC7aSm3QoCgMnW9wQCuseenAsC/am/2Q0Ck5ig4gECqrHjvgwCttjykw0Cisjkiw8C8rX5vg8C/reIlAMC9OG+zAkC+7KAyAwCntig1QQCiIjI8gcC6MHTkQMChu6glwgCxLbckgkC89/i9AMC4u37wQkC07GiggoC+8WYpQcCzuzrkw0C4LXylgwCo63ivAQC+o6vEgKtpIS5AwKrg53YBQLe+v6hBwLK6vvKBgKA0PQdAuW0mMkEArvx7awNAseg2+4OArDcoacIAqzU3qsEArLQ0bcMAo+9n7MNAs7duvEOAsKC264NAryWheADArH2ibsIApy92t8NAu3fyq8EAsWPv50GAv/x67sJAujz48YBAtuX7qUKAun70MIFAszz7tsBAsqy6eQDApqm+rcDAqqm7VAC1/iBvAMC5qWR+A0Cr5aoowoC0qyUgQQCxfKXpA4Coafwkg8C+OPz8w0Cy8mpoQsC39/p5wcCgeLwmAgCkdOk/wUC9de6rwYC+ZSM7QcCovnP7Q8CrKzPgQoCo/vj0wEC2du+rAICutuc7goC8M2HhgQC683o9AwCiau8hQsCmsa03wMC74qX0Q8C54mpDwKjgs7XDwLHvLkXAornye8NAo6S5s0DApn6mewEAp7A/9cFAriAurMOAuegydoOAoDiyWM/VCFhLW03ut2VEb9REhyGIrPdkoyoqUEVPdsBZ3CQJA==',
                            'ctl00%24ContentPlaceHolder1%24firstname' : '', 'ctl00%24ContentPlaceHolder1%24firstnametype': 'firstcontains', 'ctl00%24ContentPlaceHolder1%24lastname': '',
                            'ctl00%24ContentPlaceHolder1%24lastnametype': 'lastcontains', 'ctl00%24ContentPlaceHolder1%24title': '', 'ctl00%24ContentPlaceHolder1%24email': '',
                            'ctl00%24ContentPlaceHolder1%24department': 'Applied+Linguistics', 'ctl00%24ContentPlaceHolder1%24Button1': 'Search'}, callback=self.parse2)

    def parse2(self, response):
        print response
        selector = Selector(response)
        print selector
        for deal in selector.xpath(self.deals_list_xpath):
            loader = XPathItemLoader(faculty_contact(), selector=deals_list_xpath)

            loader.default_input_processor = MapCompose(unicode.strip)
            loader.default_output_processor = Join()

            for field, xpath in self.item_fields.iteritems():
                loader.add_xpath(field, xpath)
            yield loader.load_item()
